<template>
    <div class="page" data-name="settings">
        <div class="page-content">
            <div class="appbar">
                <div class="appbar-inner">
                    <div class="center">
                        <a href="#" class="button button-small panel-toggle display-flex" data-panel="center">
                            <i class="f7-icons">bars</i>
                        </a>
                        <a href="#" class="button button-small display-flex">
                            <i class="f7-icons">reply_fill</i>
                        </a>
                        <a href="#" class="button button-small display-flex">
                            <i class="f7-icons">forward_fill</i>
                        </a>
                    </div>

                    <div class="list">
                        <ul>
                            <!-- Open In Sheet -->
                            <li>
                                <a class="item-link smart-select smart-select-init" data-open-in="sheet">
                                    <select name="mac-windows">
                                        {{#each options}}
                                        <option value={{value}} selected>{{text}}</option>
                                        {{/each}}
                                    </select>
                                    <div class="item-content">
                                        <div class="item-inner">
                                            <div class="item-title">Mac or Windows</div>
                                        </div>
                                    </div>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
</template>
<script>
    export default {

        data: async function () {
            return {
                options: await getCameraList()
            };
        },
        // App root methods
        async mounted() {
        }
    };

    async function getCameraList() {
        let cameraList = [];
        await navigator.mediaDevices.getUserMedia({video: true})
        let mediaDevices = await navigator.mediaDevices.enumerateDevices()

        mediaDevices.forEach(mediaDevice => {
            let camera = {}
            if (mediaDevice.kind === 'videoinput') {
                camera.value = mediaDevice.deviceId
                camera.text = mediaDevice.label
                cameraList.push(camera)
            }
        });
        return cameraList
    }
</script>

